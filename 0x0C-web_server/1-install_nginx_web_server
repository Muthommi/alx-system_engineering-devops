#!/usr/bin/env bash
# This script installs Nginx, configures it to serve "Hello World!"
# and starts Nginx without systemct1

set -e

sudo apt-get update -y 
sudo apt-get install nginx -y

echo "Hello World!" | sudo tee /var/www/html/index.html > /dev/null

if pgrep -x "nginx" >/dev/null; then
    sudo pkill nginx
fi
sudo /usr/sbin/nginx

if ! pgrep -x "nginx" >/dev/null; then
    echo "Nginx failed to start."
    exit 1
fi

echo "Nginx installed and configured successfully. Visit http://localhost to see the 'Hello World!' message."
